<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Boolzapp</title>
    <!-- icon -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css" integrity="sha512-DTOQO9RWCH3ppGqcWaEA1BIZOC6xxalwEsw9c2QQeAIftl+Vegovlnee1c9QX4TctnWMn13TZye+giMm8e2LwA==" crossorigin="anonymous" referrerpolicy="no-referrer" />
    <!-- bootstrap -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous">
    <link rel="stylesheet" href="style.css" />
</head>

<body>

    <div id="app" class="">
        
        <div class="contenitore
            mx-auto d-flex">

            <!-- la nostra chat -->
            <div class="chatPersone">

                <!-- il mio profilo -->
                <div class="profilo
                    d-flex align-items-center justify-content-between">
                    
                    <div>
                        <img class="ms-2" src="img/avatar_io.jpg" alt="">
                        <span class="ms-2">Sofia</span>
                    </div>

                    <div class="d-flex gap-3 me-3">
                        <i class="fa-solid fa-circle-notch"></i>
                        <i class="fa-solid fa-message"></i>
                        <i class="fa-solid fa-ellipsis-vertical"></i>
                    </div>
                </div>

                <!-- attiva notifiche -->
                <div class="notifiche
                    d-flex align-items-center">

                    <div>
                        <i class="fa-solid fa-bell-slash ms-2"></i>
                    </div>
                    <div>
                        <span class="ms-2">
                            Ricevi notifiche di nuovi messaggi
                        </span>               
                        <br>         
                        <span class="ms-2">
                            <a href="" class="text-secondary testoPiccolo">Attiva notifiche dasktop</a>
                        </span>
                    </div>
                </div>

                <!-- cerca nome -->
                <div class="cerca
                    d-flex align-items-center justify-content-center px-2">

                    <div class="input-group">
                        <span class="input-group-text"><i class="fa-solid fa-magnifying-glass text-secondary"></i></span>
                        <input class="form-control" placeholder="Cerca o inizia una nuova chat" v-model="cercaContatto">
                    </div>
                </div>

                <!-- contatti n.-->
                <div class="persone">
                    
                    <div class="selezioanto
                        d-flex justify-content-between border-top"
                        v-for="(element, index) in filtroContatti" :key="index"

                        @click="changeChat(index)">
                        <!-- al click cambia la chat -->
                    
                        <div class="d-flex p-2">
                            <img class="ms-2" :src="`img/avatar${element.avatar}.jpg`" alt="">
                            <div>
                                <span class="ms-2">
                                    {{element.name}}
                                </span>
                                <br>
                                <!-- n1 serve per ottenere l'ultimo elemento dell'array (messages) all'interno di (contacts). -->
                                <span class="ms-2 text-secondary testoPiccolo">{{element.messages[element.messages.length - 1].message}}</span>
                            </div>    
                        </div>
                        <div class="me-3 mt-2">
                            <!-- n1 serve per ottenere l'ultimo elemento dell'array (date) all'interno di (contacts). -->
                            <span class="testoPiccolo text-secondary">{{element.messages[element.messages.length - 1].date}}</span>
                        </div>
                    </div>

                    <!-- 
                    <section>
                        <div class="chatSelect 
                        selezioanto d-flex justify-content-between border-top">
                            <div class="d-flex p-2">
                                <img class="ms-2" src="img/avatar_1.jpg" alt="">
                                <div>
                                    <span class="ms-2">Michele</span>
                                    <br>
                                    <span class="ms-2 text-secondary testoPiccolo">Ultimo messaggio inviato</span>
                                </div>    
                            </div>
                            <div class="me-3 mt-2">
                                <span class="testoPiccolo text-secondary">00:00</span>
                            </div>
                        </div>
        
                        <div class="selezioanto d-flex justify-content-between border-top">
                            <div class="d-flex p-2">
                                <img class="ms-2" src="img/avatar_2.jpg" alt="">
                                <div>
                                    <span class="ms-2">Fabio</span>
                                    <br>
                                    <span class="ms-2 text-secondary testoPiccolo">Ultimo messaggio inviato</span>
                                </div>    
                            </div>
                            <div class="me-3 mt-2">
                                <span class="testoPiccolo text-secondary">00:00</span>
                            </div>
                        </div>

                        <div class="selezioanto d-flex justify-content-between border-top">
                            <div class="d-flex p-2">
                                <img class="ms-2" src="img/avatar_3.jpg" alt="">
                                <div>
                                    <span class="ms-2">Samuele</span>
                                    <br>
                                    <span class="ms-2 text-secondary testoPiccolo">Ultimo messaggio inviato</span>
                                </div>    
                            </div>
                            <div class="me-3 mt-2">
                                <span class="testoPiccolo text-secondary">00:00</span>
                            </div>
                        </div>

                        <div class="selezioanto d-flex justify-content-between border-top">
                            <div class="d-flex p-2">
                                <img class="ms-2" src="img/avatar_4.jpg" alt="">
                                <div>
                                    <span class="ms-2">Alessandro B.</span>
                                    <br>
                                    <span class="ms-2 text-secondary testoPiccolo">Ultimo messaggio inviato</span>
                                </div>    
                            </div>
                            <div class="me-3 mt-2">
                                <span class="testoPiccolo text-secondary">00:00</span>
                            </div>
                        </div>

                        <div class="selezioanto d-flex justify-content-between border-top">
                            <div class="d-flex p-2">
                                <img class="ms-2" src="img/avatar_5.jpg" alt="">
                                <div>
                                    <span class="ms-2">Alessandro L.</span>
                                    <br>
                                    <span class="ms-2 text-secondary testoPiccolo">Ultimo messaggio inviato</span>
                                </div>    
                            </div>
                            <div class="me-3 mt-2">
                                <span class="testoPiccolo text-secondary">00:00</span>
                            </div>
                        </div>

                        <div class="selezioanto d-flex justify-content-between border-top">
                            <div class="d-flex p-2">
                                <img class="ms-2" src="img/avatar_6.jpg" alt="">
                                <div>
                                    <span class="ms-2">Claudia</span>
                                    <br>
                                    <span class="ms-2 text-secondary testoPiccolo">Ultimo messaggio inviato</span>
                                </div>    
                            </div>
                            <div class="me-3 mt-2">
                                <span class="testoPiccolo text-secondary">00:00</span>
                            </div>
                        </div>

                        <div class="selezioanto d-flex justify-content-between border-top">
                            <div class="d-flex p-2">
                                <img class="ms-2" src="img/avatar_7.jpg" alt="">
                                <div>
                                    <span class="ms-2">Federico</span>
                                    <br>
                                    <span class="ms-2 text-secondary testoPiccolo">Ultimo messaggio inviato</span>
                                </div>    
                            </div>
                            <div class="me-3 mt-2">
                                <span class="testoPiccolo text-secondary">00:00</span>
                            </div>
                        </div>

                        <div class="selezioanto d-flex justify-content-between border-top">
                            <div class="d-flex p-2">
                                <img class="ms-2" src="img/avatar_8.jpg" alt="">
                                <div>
                                    <span class="ms-2">Davide</span>
                                    <br>
                                    <span class="ms-2 text-secondary testoPiccolo">Ultimo messaggio inviato</span>
                                </div>    
                            </div>
                            <div class="me-3 mt-2">
                                <span class="testoPiccolo text-secondary">00:00</span>
                            </div>
                        </div>
                    </section>
                    -->

                </div>
            </div>

            <!-- invia e scrivi -->
            <div class="profiloChat ">
                <div class="chatProfilo
                    d-flex align-items-center justify-content-between border-start">

                    <div class="d-flex">
                        <img class="ms-2" :src="`img/avatar${ contacts[activeChat].avatar }.jpg`" alt="">
                        <div>
                            <span class="ms-2">{{ contacts[activeChat].name }}</span>
                            <br>
                            <span class="ms-2 text-secondary testoPiccolo">Ultimo accesso</span>
                        </div>    
                    </div>

                    <div class="d-flex gap-3 me-3">
                        <i class="fa-solid fa-magnifying-glass"></i>
                        <i class="fa-solid fa-paperclip"></i>
                        <i class="fa-solid fa-ellipsis-vertical"></i>
                    </div>
                </div>

                <!-- messaggi -->
                <div class="chat
                    d-flex flex-column pt-4 px-5">

                    <div class=" d-flex align-items-center p-2 m-2"
                    
                        v-for="(element, index) in contacts[activeChat].messages"

                        :class="(element.status === 'sent') ? 'sent verde ms-auto' : 'received bianco'">

                        <div class="w-100">
                            <div class="dropdown d-flex text-secondary justify-content-end">
                                <span class="bottoneChat" data-bs-toggle="dropdown"></span>
                                <ul class="dropdown-menu">
                                    <li><a class="dropdown-item" href="#">Message info</a></li>
                                    <li><a class="dropdown-item" @click="rimuoviMessaggio(index)" href="#">Delete message</a></li>
                                </ul>
                            </div>

                            {{element.message}}

                            <span class="testoPiccolo
                                d-flex justify-content-end text-secondary">
                                {{element.date}}
                            </span>    
                        </div>
                    </div>
                </div>

                <!-- tastiera -->
                <div class="tastiera
                    d-flex align-items-center justify-content-between">

                    <i class="fa-regular fa-face-smile"></i>

                    <input class="form-control w-100" placeholder="Scrivi un messaggio" v-model="messaggioMio" @keyup.enter="invioMessaggio()">
    
                    <i class="fa-solid fa-microphone"></i>
                </div>
            </div>
        </div>
    </div>

    <!-- js bootstrap -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-C6RzsynM9kWDrMNeT87bh95OGNyZPhcTNXj1NW7RuBCsyN/o0jlpcV8Qyq46cDfL" crossorigin="anonymous"></script>
    <!-- luxon -->
    <script src="https://cdn.jsdelivr.net/npm/luxon@3.4.4/build/global/luxon.min.js"></script>
    <!-- vue -->
    <script src='https://unpkg.com/vue@3'></script>
    <!-- js -->
    <script src="main.js"></script>
</body>
</html>
